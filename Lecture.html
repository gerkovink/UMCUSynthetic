<!DOCTYPE html>
<html lang="en"><head>
<script src="Lecture_files/libs/clipboard/clipboard.min.js"></script>
<script src="Lecture_files/libs/quarto-html/tabby.min.js"></script>
<script src="Lecture_files/libs/quarto-html/popper.min.js"></script>
<script src="Lecture_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="Lecture_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Lecture_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="Lecture_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.1.189">

  <meta name="author" content="Gerko Vink">
  <meta name="author" content="Thom Volker">
  <meta name="dcterms.date" content="2022-11-04">
  <title>Synthetic data generation with mice</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="Lecture_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="Lecture_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="Lecture_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="Lecture_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="Lecture_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="Lecture_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="Lecture_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="center">
  <h1 class="title">Synthetic data generation with <code>mice</code></h1>
  <p class="author">Gerko Vink</p>
  <p class="author">Thom Volker</p>
  <p class="institute">Methodology &amp; Statistics @ Utrecht University</p>
  <p class="date">November 4, 2022</p>
</section>
<section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Outline</h2>
<ul>
<li><a href="#/vocabulary" id="/toc-vocabulary">Vocabulary</a></li>
<li><a href="#/statistical-inference" id="/toc-statistical-inference">Statistical inference</a></li>
<li><a href="#/uncertainty" id="/toc-uncertainty">Uncertainty</a></li>
<li><a href="#/being-wrong-may-help" id="/toc-being-wrong-may-help">Being wrong may help</a></li>
<li><a href="#/hello-dark-data" id="/toc-hello-dark-data">Hello, dark data</a></li>
<li><a href="#/embrace-the-darkness" id="/toc-embrace-the-darkness">Embrace the darkness</a></li>
<li><a href="#/synthetic-data-generation" id="/toc-synthetic-data-generation">Synthetic data generation</a></li>
<li><a href="#/what-should-synthetic-data-be" id="/toc-what-should-synthetic-data-be">What should synthetic data be?</a></li>
</ul>
</nav>
</section>

<section id="disclaimer" class="slide level2">
<h2>Disclaimer</h2>
<p>I owe a debt of gratitude to many people as the thoughts and teachings in my slides are the process of years-long development cycles and discussions with my team, friends, colleagues and peers. When someone has contributed to the content of the slides, I have credited their authorship.</p>
<p>When external figures and other sources are shown:</p>
<ol type="1">
<li>the references are included when the origin is known, or</li>
<li>the objects are directly linked from within the public domain and the source can be obtained by right-clicking the objects.</li>
</ol>
<p>Scientific references are in the footer.</p>
<p>Opinions are my own. <br><br><br><br> Packages used:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(mice)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section>
<section id="vocabulary" class="title-slide slide level1 center">
<h1>Vocabulary</h1>

</section>
<section id="terms-i-may-use" class="slide level2">
<h2>Terms I may use</h2>
<ul>
<li>TDGM: True data generating model</li>
<li>DGP: Data generating process, closely related to the TDGM, but with all the wacky additional uncertainty</li>
<li>Truth: The comparative truth that we are interested in</li>
<li>Bias: The distance to the comparative truth</li>
<li>Variance: When not everything is the same</li>
<li>Estimate: Something that we calculate or guess</li>
<li>Estimand: The thing we aim to estimate and guess</li>
<li>Population: That larger entity without sampling variance</li>
<li>Sample: The smaller thing with sampling variance</li>
<li>Incomplete: There exists a more complete version, but we don’t have it</li>
<li>Observed: What we have</li>
<li>Unobserved: What we would also like to have</li>
</ul>
</section></section>
<section>
<section id="statistical-inference" class="title-slide slide level1 center">
<h1>Statistical inference</h1>

</section>
<section id="at-the-start" class="slide level2">
<h2>At the start</h2>
<p>We begin today with an exploration into statistical inference.</p>
<center>
<strong>Statistical inference is the process of drawing conclusions from truths </strong>
</center>
<p>Truths are boring, but they are convenient.</p>
<ul>
<li>however, for most problems truths require a lot of calculations, tallying or a complete census.</li>
<li>therefore, a proxy of the truth is in most cases sufficient</li>
<li>An example for such a proxy is a <strong>sample</strong></li>
<li>Samples are widely used and have been for a long time<sup>1</sup></li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn1"><p>See <a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;ved=2ahUKEwjkyPTCs4L3AhUCuKQKHUpmBvIQFnoECAMQAw&amp;url=https%3A%2F%2Fwww.cbs.nl%2F-%2Fmedia%2Fimported%2Fdocuments%2F2009%2F07%2F2009-15-x10-pub.pdf&amp;usg=AOvVaw3BpUW2s_k0MB5yH1o-QGf2">Jelke Bethlehem’s CBS discussion paper</a> for an overview of the history of sampling within survey</p></li></ol></aside></section>
<section id="being-wrong-about-the-truth" class="slide level2">
<h2>Being wrong about the truth</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/2.%20missingness_problem.png" style="width:90.0%"></p>
</div><div class="column" style="width:60%;">
<ul>
<li>The population is the truth</li>
<li>The sample comes from the population, but is generally smaller in size</li>
<li>This means that not all cases from the population can be in our sample</li>
<li>If not all information from the population is in the sample, then our sample may be <em>wrong</em> <br><br><br> Q1: Why is it important that our sample is not wrong?<br> Q2: How do we know that our sample is not wrong?</li>
</ul>
</div>
</div>
</section>
<section id="solving-the-missingness-problem" class="slide level2">
<h2>Solving the missingness problem</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/3.%20random_sampling.png" style="width:90.0%"></p>
</div><div class="column" style="width:60%;">
<ul>
<li>There are many flavours of sampling</li>
<li>If we give every unit in the population the same probability to be sampled, we do <strong>random sampling</strong></li>
<li>The convenience with random sampling is that the missingness problem can be ignored</li>
<li>The missingness problem would in this case be: <strong>not every unit in the population has been observed in the sample</strong></li>
</ul>
<p><br> Q3: Would that mean that if we simply observe every potential unit, we would be unbiased about the truth?</p>
</div>
</div>
</section>
<section id="sidestep" class="slide level2">
<h2>Sidestep</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/4.%20sidestep1.png" style="width:90.0%"></p>
</div><div class="column" style="width:50%;">
<ul>
<li><p>The problem is a bit larger</p></li>
<li><p>We have three entities at play, here:</p>
<ol type="1">
<li>The truth we’re interested in</li>
<li>The proxy that we have (e.g.&nbsp;sample)</li>
<li>The model that we’re running</li>
</ol></li>
<li><p>The more features we use, the more we capture about the outcome for the cases in the data</p></li>
</ul>
</div>
</div>
</section>
<section id="sidestep-1" class="slide level2">
<h2>Sidestep</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/4.%20sidestep1.png" style="width:90.0%"></p>
</div><div class="column" style="width:50%;">
<ul>
<li>The more cases we have, the more we approach the true information</li>
</ul>
<p>All these things are related to uncertainty. Our model can still yield biased results when fitted to <span class="math inline">\(\infty\)</span> features. Our inference can still be wrong when obtained on <span class="math inline">\(\infty\)</span> cases.</p>
</div>
</div>
</section>
<section id="sidestep-2" class="slide level2">
<h2>Sidestep</h2>

<img data-src="img/5.%20sidestep2.png" style="width:90.0%" class="r-stretch"><p><strong>Core assumption: all observations are bonafide</strong></p>
</section></section>
<section>
<section id="uncertainty" class="title-slide slide level1 center">
<h1>Uncertainty</h1>

</section>
<section id="uncertainty-simplified" class="slide level2">
<h2>Uncertainty simplified</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="img/6.%20Sample_uncertainty.png" style="width:90.0%"></p>
</div><div class="column" style="width:40%;">
<p>When we do not have all information:</p>
<ol type="1">
<li>We need to accept that we are probably wrong</li>
<li>We just have to quantify how wrong we are</li>
</ol>
<p>In some cases we estimate that we are only a bit wrong. In other cases we estimate that we could be very wrong. This is the purpose of testing.</p>
<p>The uncertainty measures about our estimates can be used to create intervals</p>
</div>
</div>
</section>
<section id="confidence-intervals" class="slide level2">
<h2>Confidence intervals</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="img/7.%20confidence_intervals.png" style="width:90.0%"></p>
</div><div class="column" style="width:40%;">
<p>Confidence intervals can be hugely informative!</p>
<p>If we sample 100 samples from a population, then a <em>95% CI</em> will cover the population value <strong>at least</strong> 95 out of 100 times.</p>
<ul>
<li><p>If the coverage <span class="math inline">\(&lt;95\)</span>: bad estimation process with risk of errors and invalid inference</p></li>
<li><p>If the coverage <span class="math inline">\(\geq 95\)</span>: inefficient estimation process, but correct conclusions and valid inference. Lower statistical power.</p></li>
</ul>
</div>
</div>
</section></section>
<section>
<section id="being-wrong-may-help" class="title-slide slide level1 center">
<h1>Being wrong may help</h1>

</section>
<section id="the-holy-trinity" class="slide level2">
<h2>The holy trinity</h2>
<p>Whenever I evaluate something, I tend to look at three things:</p>
<ul>
<li>bias (how far from the truth)</li>
<li>uncertainty/variance (how wide is my interval)</li>
<li>coverage (how often do I cover the truth with my interval)</li>
</ul>
<p>As a function of model complexity in specific modeling efforts, these components play a role in the bias/variance tradeoff</p>
<center>
<img data-src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9f/Bias_and_variance_contributing_to_total_error.svg/2560px-Bias_and_variance_contributing_to_total_error.svg.png" style="width:50.0%">
</center>
</section></section>
<section>
<section id="hello-dark-data" class="title-slide slide level1 center">
<h1>Hello, dark data</h1>

<img data-src="img/dd.jpg" style="width:75.0%" class="r-stretch"></section>
<section id="lets-do-it-again-with-missingness" class="slide level2">
<h2>Let’s do it again with missingness</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p><img data-src="img/9.missingness.png" style="width:60.0%"></p>
</div><div class="column" style="width:70%;">
<p>We now have a new problem:</p>
<ul>
<li>we do not have the whole truth; but merely a sample of the truth</li>
<li>we do not even have the whole sample, but merely a sample of the sample of the truth.</li>
</ul>
<p>Q4. What would be a simple solution to allowing for valid inferences on the incomplete sample? <br> Q5. Would that solution work in practice?</p>
</div>
</div>
</section>
<section id="lets-do-it-again-with-missingness-1" class="slide level2">
<h2>Let’s do it again with missingness</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p><img data-src="img/10.%20missingness_simplified.png" style="width:68.0%"></p>
</div><div class="column" style="width:70%;">
<p>We now have a new problem:</p>
<ul>
<li>we do not have the whole truth; but merely a sample of the truth</li>
<li>we do not even have the whole sample, but merely a sample of the sample of the truth.</li>
</ul>
<p>Q4. What would be a simple solution to allowing for valid inferences on the incomplete sample? <br> Q5. Would that solution work in practice?</p>
</div>
</div>
</section>
<section id="multiple-imputation" class="slide level2">
<h2>Multiple imputation</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="img/11.%20missingness_solved.png" style="width:80.0%"></p>
</div><div class="column" style="width:40%;">
<p>There are two sources of uncertainty that we need to cover:</p>
<ol type="1">
<li><strong>Uncertainty about the missing value</strong>:<br>when we don’t know what the true observed value should be, we must create a distribution of values with proper variance (uncertainty).</li>
<li><strong>Uncertainty about the sampling</strong>:<br>nothing can guarantee that our sample is the one true sample. So it is reasonable to assume that the parameters obtained on our sample are biased.</li>
</ol>
<p><strong>More challenging if the sample does not randomly come from the population or if the feature set is too limited to solve for the substantive model of interest</strong></p>
</div>
</div>
</section></section>
<section>
<section id="embrace-the-darkness" class="title-slide slide level1 center">
<h1>Embrace the darkness</h1>

</section>
<section id="now-how-do-we-know-we-did-well" class="slide level2">
<h2>Now how do we know we did well?</h2>
<p>I’m really sorry, but:</p>
<div class="notepaper">
<figure class="quote">
<blockquote class="curly-quotes" cite="https://www.youtube.com/watch?v=qYLrc9hy0t0">
<font color="black"> We don’t. In practice we may often lack the necessary comparative truths! </font>
</blockquote>
</figure>
</div>
<p>For example:</p>
<ol type="1">
<li>Predict a future response, but we only have the past</li>
<li>Analyzing incomplete data without a reference about the truth</li>
<li>Estimate the effect between two things that can never occur together</li>
<li>Mixing bonafide observations with bonafide non-observations</li>
</ol>
</section>
<section id="what-is-the-goal-of-multiple-imputation" class="slide level2">
<h2>What is the goal of multiple imputation?</h2>
<p>The goal:</p>
<ul>
<li><strong>IS NOT</strong> to find the correct value for a missing data point</li>
<li><strong>IS</strong> to find an answer to the analysis problem, given that there are (many) data points missing.</li>
</ul>
<p>We are not interested in whether the imputed value corresponds to its true counterpart in the population, but we rather sample plausible values that could have been from the posterior predictive distribution</p>
</section>
<section id="demonstration-of-imputation" class="slide level2">
<h2>Demonstration of imputation</h2>
<p>Let our analysis model be</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>boys <span class="sc">%$%</span> </span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="fu">lm</span>(hgt <span class="sc">~</span> age <span class="sc">+</span> tv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>with output</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = hgt ~ age + tv)

Residuals:
    Min      1Q  Median      3Q     Max 
-24.679  -5.134  -0.398   5.175  23.778 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 105.4823     3.4704  30.395  &lt; 2e-16 ***
age           3.8430     0.3262  11.782  &lt; 2e-16 ***
tv            0.4919     0.1278   3.849 0.000155 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 8.389 on 221 degrees of freedom
  (524 observations deleted due to missingness)
Multiple R-squared:  0.7742,    Adjusted R-squared:  0.7721 
F-statistic: 378.8 on 2 and 221 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>generated on 224 cases. The full data size is</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 748   9</code></pre>
</div>
</div>
</section>
<section id="demonstration-of-imputation-1" class="slide level2">
<h2>Demonstration of imputation</h2>
<p>To impute and analyze the same model with <code>mice</code>, we can simply run:</p>
<div class="cell" data-hash="Lecture_cache/revealjs/unnamed-chunk-5_e12258deeabb4ff4b1be5221ed871d95">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>boys <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">mice</span>(<span class="at">m =</span> <span class="dv">5</span>, <span class="at">method =</span> <span class="st">"cart"</span>, <span class="at">printFlag =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">complete</span>(<span class="st">"all"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="fu">map</span>(<span class="sc">~</span>.x <span class="sc">%$%</span> <span class="fu">lm</span>(hgt <span class="sc">~</span> age <span class="sc">+</span> tv)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="fu">pool</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         term   estimate  std.error  statistic        df      p.value
1 (Intercept) 71.4996462 0.62149605 115.044409 735.07926 0.000000e+00
2         age  6.9612293 0.09409268  73.982690  78.04537 0.000000e+00
3          tv -0.4650875 0.08986812  -5.175222  49.56070 4.126098e-06</code></pre>
</div>
</div>
<center>
<img data-src="img/imp_process.png" style="width:60.0%">
</center>
</section>
<section id="what-have-we-done" class="slide level2">
<h2>What have we done?</h2>
<p>We have used <code>mice</code> to obtain draws from a posterior predictive distribution of the missing data, conditional on the observed data.</p>
<p>The imputed values are mimicking the sampling variation and can be used to infer about the underlying TDGM, <strong>if and only if</strong>:</p>
<ul>
<li>The observed data holds the information about the missing data (MAR/MCAR)</li>
</ul>
</section></section>
<section>
<section id="synthetic-data-generation" class="title-slide slide level1 center">
<h1>Synthetic data generation</h1>

</section>
<section id="imputation-vs-synthetisation" class="slide level2">
<h2>Imputation vs Synthetisation</h2>
<p>Instead of drawing only imputations from the posterior predictive distribution, we might as well overimpute the observed data. <img data-src="img/patterns.png"></p>
</section>
<section id="how-to-draw-synthetic-data-sets-with-mice" class="slide level2">
<h2>How to draw synthetic data sets with <code>mice</code></h2>
<div class="cell" data-hash="Lecture_cache/revealjs/unnamed-chunk-6_56e01d5c0081134552aca71ebe9514f3">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>boys <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">mice</span>(<span class="at">m =</span> <span class="dv">5</span>, <span class="at">method =</span> <span class="st">"cart"</span>, <span class="at">printFlag =</span> <span class="cn">FALSE</span>, <span class="at">where =</span> <span class="fu">matrix</span>(<span class="cn">TRUE</span>, <span class="dv">748</span>, <span class="dv">9</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="fu">complete</span>(<span class="st">"all"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="fu">map</span>(<span class="sc">~</span>.x <span class="sc">%$%</span> <span class="fu">lm</span>(hgt <span class="sc">~</span> age <span class="sc">+</span> tv)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="fu">pool</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         term   estimate std.error statistic       df      p.value
1 (Intercept) 71.1914095 0.7962174 89.412020 43.37485 0.000000e+00
2         age  6.9914529 0.1141189 61.264648 45.55541 0.000000e+00
3          tv -0.4684145 0.1018189 -4.600469 42.92353 3.713106e-05</code></pre>
</div>
</div>
<center>
<img data-src="img/synth_process.png" style="width:60.0%">
</center>
<p>But we make an error!</p>
</section>
<section id="pooling-in-imputation" class="slide level2">
<h2>Pooling in imputation</h2>
<p>Rubin (1987, p76) defined the following rules:</p>
<p>For any number of multiple imputations <span class="math inline">\(m\)</span>, the combination of the analysis results for any estimate <span class="math inline">\(\hat{Q}\)</span> of estimand <span class="math inline">\(Q\)</span> with corresponding variance <span class="math inline">\(U\)</span>, can be done in terms of the average of the <span class="math inline">\(m\)</span> complete-data estimates</p>
<p><span class="math display">\[\bar{Q} = \sum_{l=1}^{m}\hat{Q}_l / m,\]</span></p>
<p>and the corresponding average of the <span class="math inline">\(m\)</span> complete data variances</p>
<p><span class="math display">\[\bar{U} = \sum_{l=1}^{m}{U}_l / m.\]</span></p>
<div class="footer">
<p>Rubin, D.B. (1987). Multiple Imputation for Nonresponse in Surveys. New York: John Wiley and Sons.</p>
</div>
</section>
<section id="pooling-in-imputation-1" class="slide level2">
<h2>Pooling in imputation</h2>
<p>Simply using <span class="math inline">\(\bar{Q}\)</span> and <span class="math inline">\(\bar{U}_m\)</span> to obtain our inferences would be to simplistic. In that case we would ignore any possible variation between the separate <span class="math inline">\(\hat{Q}_l\)</span> and the fact that we only generate a finite set of imputations <span class="math inline">\(m\)</span>. Rubin (1987, p.&nbsp;76) established that the total variance <span class="math inline">\(T\)</span> of <span class="math inline">\((Q-\bar{Q})\)</span> would equal</p>
<p><span class="math display">\[T = \bar{U} + B + B/m,\]</span></p>
<p>Where the between imputation variance <span class="math inline">\(B\)</span> is defined as</p>
<p><span class="math display">\[B = \sum_{l=1}^{m}(\hat{Q}_l - \bar{Q})^\prime(\hat{Q}_l - \bar{Q}) / (m-1)\]</span></p>
<p><strong>This assumes that some of the data are observed and remain constant over the synthetic sets</strong></p>
<p>The total variance <span class="math inline">\(T\)</span> of <span class="math inline">\((Q-\bar{Q})\)</span> should (Reiter, 2003) equal</p>
<p><span class="math display">\[T = \bar{U} + B/m.\]</span></p>
<div class="footer">
<p>Reiter, J.P. (2003). Inference for Partially Synthetic, Public Use Microdata Sets. Survey Methodology, 29, 181-189.</p>
</div>
</section>
<section id="so-the-correct-code-is" class="slide level2">
<h2>So, the correct code is</h2>
<div class="cell" data-hash="Lecture_cache/revealjs/unnamed-chunk-7_38326931966ded09d9e854f5a2ca854e">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>boys <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">mice</span>(<span class="at">m =</span> <span class="dv">5</span>, <span class="at">method =</span> <span class="st">"cart"</span>, <span class="at">printFlag =</span> <span class="cn">FALSE</span>, <span class="at">where =</span> <span class="fu">matrix</span>(<span class="cn">TRUE</span>, <span class="dv">748</span>, <span class="dv">9</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="fu">complete</span>(<span class="st">"all"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="fu">map</span>(<span class="sc">~</span>.x <span class="sc">%$%</span> <span class="fu">lm</span>(hgt <span class="sc">~</span> age <span class="sc">+</span> tv)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-5"><a href="#cb9-5"></a>  <span class="fu">pool</span>(<span class="at">rule =</span> <span class="st">"reiter2003"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-6"><a href="#cb9-6"></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         term   estimate  std.error  statistic       df      p.value
1 (Intercept) 71.1914095 0.69301891 102.726504  976.576 0.000000e+00
2         age  6.9914529 0.09973928  70.097285 1046.453 0.000000e+00
3          tv -0.4684145 0.08854244  -5.290283  962.247 1.512358e-07</code></pre>
</div>
</div>
</section>
<section id="why-multiple-synthetic-sets" class="slide level2">
<h2>Why multiple synthetic sets?</h2>
<p>Thank back about the goal of statistical inference: we want to go back to the true data generating model.</p>
<ol type="1">
<li>We do so by reverse engineering the true data generating process</li>
<li>Based on our observed data</li>
<li>We do not know this process; hence multiple synthetic values</li>
</ol>
<p>The multiplicity of the solution allows for smoothing over any Monte Carlo error that may arise from generating a single set.</p>
</section>
<section id="generating-more-synthetic-data" class="slide level2">
<h2>Generating more synthetic data</h2>
<div class="cell" data-hash="Lecture_cache/revealjs/unnamed-chunk-8_333002268e17063c90e972e5a0962eaf">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>mira <span class="ot">&lt;-</span> boys <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">mice</span>(<span class="at">m =</span> <span class="dv">6</span>, <span class="at">method =</span> <span class="st">"cart"</span>, <span class="at">printFlag =</span> <span class="cn">FALSE</span>, <span class="at">where =</span> <span class="fu">matrix</span>(<span class="cn">TRUE</span>, <span class="dv">748</span>, <span class="dv">9</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="fu">list</span>(<span class="st">'1'</span> <span class="ot">=</span> <span class="fu">rbind</span>(<span class="fu">complete</span>(., <span class="dv">1</span>), <span class="fu">complete</span>(., <span class="dv">2</span>)),</span>
<span id="cb11-4"><a href="#cb11-4"></a>       <span class="st">'2'</span> <span class="ot">=</span> <span class="fu">rbind</span>(<span class="fu">complete</span>(., <span class="dv">3</span>), <span class="fu">complete</span>(., <span class="dv">4</span>)),</span>
<span id="cb11-5"><a href="#cb11-5"></a>       <span class="st">'3'</span> <span class="ot">=</span> <span class="fu">rbind</span>(<span class="fu">complete</span>(., <span class="dv">5</span>), <span class="fu">complete</span>(., <span class="dv">6</span>))) <span class="sc">%&gt;%</span> .[<span class="sc">-</span><span class="dv">1</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a href="#cb11-6"></a>  data.table<span class="sc">::</span><span class="fu">setattr</span>(<span class="st">"class"</span>, <span class="fu">c</span>(<span class="st">"mild"</span>, <span class="fu">class</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="fu">map</span>(<span class="sc">~</span>.x <span class="sc">%$%</span> <span class="fu">lm</span>(hgt <span class="sc">~</span> reg))</span>
<span id="cb11-8"><a href="#cb11-8"></a></span>
<span id="cb11-9"><a href="#cb11-9"></a>mira <span class="sc">%&gt;%</span> <span class="fu">pool</span>(<span class="at">rule =</span> <span class="st">"reiter2003"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-10"><a href="#cb11-10"></a>  <span class="fu">summary</span>() <span class="sc">%&gt;%</span> tibble<span class="sc">::</span><span class="fu">column_to_rownames</span>(<span class="st">"term"</span>) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            estimate std.error statistic     df p.value
(Intercept)  150.427     4.684    32.114 11.731   0.000
regeast      -16.851     6.601    -2.553  6.622   0.040
regwest      -22.263     4.787    -4.650 32.970   0.000
regsouth     -23.700     5.410    -4.381 14.367   0.001
regcity      -24.295     6.477    -3.751 15.545   0.002</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>mira <span class="sc">%&gt;%</span> <span class="fu">pool</span>(<span class="at">rule =</span> <span class="st">"reiter2003"</span>, </span>
<span id="cb13-2"><a href="#cb13-2"></a>              <span class="at">custom.t =</span> <span class="st">".data$ubar * 2 + .data$b / .data$m"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">summary</span>() <span class="sc">%&gt;%</span> tibble<span class="sc">::</span><span class="fu">column_to_rownames</span>(<span class="st">"term"</span>) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            estimate std.error statistic     df p.value
(Intercept)  150.427     5.901    25.492 11.731   0.000
regeast      -16.851     7.949    -2.120  6.622   0.074
regwest      -22.263     6.340    -3.512 32.970   0.001
regsouth     -23.700     6.901    -3.434 14.367   0.004
regcity      -24.295     8.297    -2.928 15.545   0.010</code></pre>
</div>
</div>
<p>Some adjustment to the pooling rules is neede to avoid p-inflation.</p>
<div class="footer">
<p>Raab, Gillian M, Beata Nowok, and Chris Dibben. 2018. “Practical Data Synthesis for Large Samples”. Journal of Privacy and Confidentiality 7 (3):67-97. <a href="https://doi.org/10.29012/jpc.v7i3.407">https://doi.org/10.29012/jpc.v7i3.407.</a></p>
</div>
</section>
<section id="some-care-is-needed" class="slide level2">
<h2>Some care is needed</h2>
<p>With synthetic data generation and synthetic data implementation come some risks.</p>
<p>Any idea?</p>
</section></section>
<section>
<section id="what-should-synthetic-data-be" class="title-slide slide level1 center">
<h1>What should synthetic data be?</h1>

</section>
<section id="testing-validity" class="slide level2">
<h2>Testing validity</h2>
<p>Nowadays many synthetic data cowboys claim that they can generate synthetic data that looks like the real data that served as input.</p>
<p>This is like going to Madam Tusseaud’s: at face value it looks identical, but when experienced in real life it’s just not the same as the living thing.</p>
<p>Many of these synthetic data packages only focus on marginal or conditional distributions. With <code>mice</code> we also consider the inferential properties of the synthetic data.</p>
<p>In general, we argue [^4] that any synthetic data generation procedure should</p>
<ol type="1">
<li>Preserve marginal distributions</li>
<li>Preserve conditional distribution</li>
<li>Yield valid inference</li>
<li>Yield synthetic data that are indistinguishable from the real data</li>
</ol>
<div class="footer">
<p>Volker, T.B.; Vink, G. Anonymiced Shareable Data: Using mice to Create and Analyze Multiply Imputed Synthetic Datasets. Psych 2021, 3, 703-716. <a href="https://doi.org/10.3390/psych3040045">https://doi.org/10.3390/psych3040045</a></p>
</div>
</section>
<section id="example-from-simulation" class="slide level2">
<h2>Example from simulation</h2>
<p>When valid synthetic data are generated, the variance of the estimates is correct, such that the confidence intervals cover the population (i.e.&nbsp;true) value sufficiently [^5]. Take e.g.&nbsp;the following proportional odds model from Volker &amp; Vink (2021):</p>
<table>
<colgroup>
<col style="width: 34%">
<col style="width: 26%">
<col style="width: 21%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th>term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">synthetic <br> bias</th>
<th style="text-align: right;">synthetic <br> cov</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>age</td>
<td style="text-align: right;">0.461</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.939</td>
</tr>
<tr class="even">
<td>hc</td>
<td style="text-align: right;">-0.188</td>
<td style="text-align: right;">-0.004</td>
<td style="text-align: right;">0.945</td>
</tr>
<tr class="odd">
<td>regeast</td>
<td style="text-align: right;">-0.339</td>
<td style="text-align: right;">0.092</td>
<td style="text-align: right;">0.957</td>
</tr>
<tr class="even">
<td>regwest</td>
<td style="text-align: right;">0.486</td>
<td style="text-align: right;">-0.122</td>
<td style="text-align: right;">0.944</td>
</tr>
<tr class="odd">
<td>regsouth</td>
<td style="text-align: right;">0.646</td>
<td style="text-align: right;">-0.152</td>
<td style="text-align: right;">0.943</td>
</tr>
<tr class="even">
<td>regcity</td>
<td style="text-align: right;">-0.069</td>
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">0.972</td>
</tr>
<tr class="odd">
<td>G1<span class="math inline">\(|\)</span>G2</td>
<td style="text-align: right;">-6.322</td>
<td style="text-align: right;">-0.254</td>
<td style="text-align: right;">0.946</td>
</tr>
<tr class="even">
<td>G2<span class="math inline">\(|\)</span>G3</td>
<td style="text-align: right;">-4.501</td>
<td style="text-align: right;">-0.246</td>
<td style="text-align: right;">0.945</td>
</tr>
<tr class="odd">
<td>G3<span class="math inline">\(|\)</span>G4</td>
<td style="text-align: right;">-3.842</td>
<td style="text-align: right;">-0.244</td>
<td style="text-align: right;">0.948</td>
</tr>
<tr class="even">
<td>G4<span class="math inline">\(|\)</span>G5</td>
<td style="text-align: right;">-2.639</td>
<td style="text-align: right;">-0.253</td>
<td style="text-align: right;">0.947</td>
</tr>
</tbody>
</table>
<div class="footer">
<p>Volker, T.B.; Vink, G. Anonymiced Shareable Data: Using mice to Create and Analyze Multiply Imputed Synthetic Datasets. Psych 2021, 3, 703-716. <a href="https://doi.org/10.3390/psych3040045">https://doi.org/10.3390/psych3040045</a></p>
</div>
</section>
<section id="end-of-presentation" class="slide level2">
<h2>End of presentation</h2>
<center>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://imgc.allpostersimages.com/img/posters/scientist-sits-at-computer-that-has-a-thought-balloon-over-it-that-reads-cartoon_u-L-PGPH660.jpg?artHeight=900&amp;artPerspective=n&amp;artWidth=900" style="width:60.0%"></p>
<p></p><figcaption>A. Bacall</figcaption><p></p>
</figure>
</div>
</center>
<p><img src="logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Gerko Vink and Thom Volker</p>
</div>
</section></section>

    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="Lecture_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="Lecture_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="Lecture_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="Lecture_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="Lecture_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="Lecture_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="Lecture_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="Lecture_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="Lecture_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="Lecture_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1200,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 7.5e-2,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        function fireSlideChanged(previousSlide, currentSlide) {

          // dispatch for htmlwidgets
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for reveal
        if (window.Reveal) {
          window.Reveal.addEventListener("slidechanged", function(event) {
            fireSlideChanged(event.previousSlide, event.currentSlide);
          });
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        setTimeout(function() {
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const cites = ref.parentNode.getAttribute('data-cites').split(' ');
        tippyHover(ref, function() {
          var popup = window.document.createElement('div');
          cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    });
    </script>
    

</body></html>